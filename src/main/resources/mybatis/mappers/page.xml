<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.PageDAO">

    <select id="listWithPaging" resultType="com.boot.dto.BoardDTO">
        <![CDATA[
        SELECT BOARD_NO AS boardNo,
               BOARD_NAME AS boardName,
               BOARD_TITLE AS boardTitle,
               BOARD_CONTENT AS boardContent,
               BOARD_DATE AS boardDate,
               HIT AS hit
        FROM (
            SELECT ROWNUM AS rnum,
                   b.BOARD_NO, b.BOARD_NAME, b.BOARD_TITLE, b.BOARD_CONTENT, b.BOARD_DATE, b.HIT
            FROM (
                SELECT BOARD_NO, BOARD_NAME, BOARD_TITLE, BOARD_CONTENT, BOARD_DATE, HIT
                FROM RECALL_BOARD
                ORDER BY BOARD_NO DESC
            ) b
            WHERE ROWNUM <= #{pageNum} * #{amount}
        )
        WHERE rnum > (#{pageNum}-1) * #{amount}
    ]]>
    </select>

    <select id="getTotalCount" resultType="int">
        SELECT COUNT(*) FROM RECALL_BOARD
    </select>

</mapper>